# 🎉 Supabase 云同步版 - 使用说明

## ✅ 已完成的功能

### 🔐 多用户系统
- ✅ 用户注册（邮箱 + 密码）
- ✅ 用户登录
- ✅ 退出登录
- ✅ 每个用户独立的数据空间

### 🔄 自动云同步
- ✅ 数据自动保存到云端
- ✅ 多设备实时同步
- ✅ 不需要手动导出导入

### 🔒 端到端加密
- ✅ 密码在浏览器中加密
- ✅ 云端只存储加密数据
- ✅ 使用 AES-256-GCM 加密

### 📱 完整功能
- ✅ 添加/编辑/删除凭证
- ✅ 搜索功能
- ✅ 密码显示/隐藏
- ✅ 一键复制密码
- ✅ 导出备份

---

## 🚀 如何使用

### 第一步：打开云同步版

1. **本地测试**：
   - 直接打开 `index.html` 文件

2. **在线使用**（推荐）：
   - 我们需要把代码推送到 GitHub
   - 然后通过 GitHub Pages 访问

### 第二步：注册账号

1. 点击"注册"标签
2. 输入邮箱地址
3. 设置密码（至少6位）
4. 确认密码
5. 点击"注册"按钮

⚠️ **重要**：
- 注册后会收到验证邮件
- 点击邮件中的链接验证账号
- 验证后才能登录

### 第三步：登录

1. 点击"登录"标签
2. 输入邮箱和密码
3. 点击"登录"按钮

### 第四步：添加密码

1. 点击"+ 添加新凭证"
2. 填写网站名称、用户名、密码
3. 点击"保存"
4. 数据自动同步到云端！

### 第五步：在其他设备使用

1. 在手机或其他电脑上打开网站
2. 用同一个账号登录
3. 自动看到所有密码！

---

## 🆚 两个版本对比

| 功能 | 本地版 (index-local.html) | 云同步版 (index.html) |
|------|--------------------------|----------------------|
| 数据存储 | 浏览器 localStorage | Supabase 云数据库 |
| 多用户 | ❌ 单用户 | ✅ 多用户系统 |
| 跨设备同步 | ❌ 需要手动导出导入 | ✅ 自动实时同步 |
| 注册登录 | ❌ 只需主密码 | ✅ 邮箱密码登录 |
| 数据安全 | ✅ 本地加密 | ✅ 端到端加密 |
| 离线使用 | ✅ 完全离线 | ❌ 需要网络 |
| 备份导出 | ✅ 支持 | ✅ 支持 |

---

## 📤 部署到 GitHub Pages

### 部署到 GitHub Pages

```bash
# 提交并推送
git add .
git commit -m "更新密码管理器"
git push origin main
```

访问地址：
- 云同步版（默认）：`https://fanyilang.github.io/password_manager/`
- 本地版：`https://fanyilang.github.io/password_manager/index-local.html`

---

## 🔧 配置说明

### Supabase 配置文件

文件位置：`js/config/supabase-config.js`

```javascript
const SUPABASE_CONFIG = {
    url: 'https://sflbywafjqusukjtozd.supabase.co',
    anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
};
```

⚠️ **注意**：
- 这个配置文件已经包含了你的 Supabase 信息
- anon key 是公开的，可以安全地放在前端
- 数据通过行级安全策略（RLS）保护

---

## 🔐 安全说明

### 加密机制

1. **密码派生密钥**：
   - 用户登录密码 + 邮箱 → 加密密钥
   - 使用 PBKDF2（100,000 次迭代）

2. **数据加密**：
   - 密码在浏览器中加密
   - 使用 AES-256-GCM
   - 云端只存储密文

3. **行级安全**：
   - 用户只能访问自己的数据
   - Supabase 自动验证权限

### 安全提示

✅ **安全的做法**：
- 使用强密码（至少12位）
- 定期导出备份
- 不要在公共电脑上使用

❌ **不安全的做法**：
- 使用简单密码
- 分享账号密码
- 在不安全的网络环境使用

---

## 🆘 常见问题

### Q: 注册后收不到验证邮件？
A: 
1. 检查垃圾邮件文件夹
2. 等待几分钟（可能延迟）
3. 在 Supabase 控制台手动验证用户

### Q: 忘记密码怎么办？
A: 
- 目前版本不支持密码重置
- 建议定期导出备份
- 下个版本会添加密码重置功能

### Q: 数据会丢失吗？
A: 
- Supabase 有自动备份
- 建议定期导出本地备份
- 免费版数据永久保存

### Q: 可以删除账号吗？
A: 
- 可以在 Supabase 控制台删除用户
- 删除用户会自动删除所有数据

### Q: 本地版的数据能导入吗？
A: 
- 可以！使用导出功能
- 本地版导出 → 云同步版导入
- 需要输入备份密码

---

## 📊 Supabase 免费额度

| 资源 | 免费额度 | 说明 |
|------|---------|------|
| 数据库存储 | 500 MB | 可存储数万条密码 |
| 带宽 | 5 GB/月 | 足够个人使用 |
| 用户数 | 50,000 | 月活跃用户 |
| API 请求 | 无限制 | 完全免费 |

对个人使用完全足够！

---

## 🎯 下一步

1. **测试功能**：
   - 在本地打开 `index.html`
   - 注册一个测试账号
   - 添加几个密码试试

2. **部署到 GitHub Pages**：
   - 推送代码到 GitHub
   - 在手机上测试同步

---

**准备好测试了吗？** 🚀

打开 `index.html` 文件，开始体验云同步版吧！
